{% extends "base.html" %}
{% block title %}ç™»å…¥{% endblock %}
{% block content %}

<div class="auth-only-card">
  <div class="auth-card">

    <!-- å“ç‰Œå€ -->
    <div class="login-brand">
      <div class="row1">
        <span class="logo-emoji" aria-hidden="true">ğŸ“Š</span>
        <div class="title"><span class="strong">AurumLedger</span> ä¼æ¥­ç‰ˆ</div>
      </div>
      <div class="sub">é¤é£²ä½œå¸³ç³»çµ±</div>
    </div>

    {% if error %}
      <div class="alert error">{{ error }}</div>
    {% endif %}
    {% if ok %}
      <div class="alert ok">{{ ok }}</div>
    {% endif %}

    {% if first_setup %}
      <!-- é¦–æ¬¡è¨­å®šå¸³è™Ÿ -->
      <form method="post" action="/login" style="display:grid;gap:10px">
        <input type="hidden" name="mode" value="setup">
        <label>å¸³è™Ÿ</label>
        <input class="input" type="text" name="username" placeholder="è¼¸å…¥ç™»å…¥å¸³è™Ÿ" required>
        <label>å¯†ç¢¼</label>
        <input class="input" type="password" name="password" placeholder="è¼¸å…¥ç™»å…¥å¯†ç¢¼" required>
        <button class="btn primary" type="submit">å»ºç«‹å¸³è™Ÿä¸¦ç™»å…¥</button>
      </form>
    {% else %}
      <!-- ä¸€èˆ¬ç™»å…¥ -->
      <form method="post" action="/login" style="display:grid;gap:10px">
        <input type="hidden" name="mode" value="login">
        <label>å¸³è™Ÿ</label>
        <input class="input" type="text" name="username" value="{{ remembered or '' }}" placeholder="è¼¸å…¥å¸³è™Ÿ" required>
        <label>å¯†ç¢¼</label>
        <input class="input" type="password" name="password" placeholder="è¼¸å…¥å¯†ç¢¼" required>
        <label style="display:flex;align-items:center;gap:8px;margin-top:4px">
          <!-- é è¨­å‹¾é¸ï¼›ä½¿ç”¨è€…å¯è‡ªè¡Œå–æ¶ˆï¼Œè‹¥å–æ¶ˆå‰‡å¾Œç«¯æœƒåˆªé™¤ cookie -->
          <input type="checkbox" name="remember" checked> è¨˜ä½å¸³è™Ÿ
        </label>
        <button class="btn primary" type="submit">ç™»å…¥</button>
      </form>
    {% endif %}
  </div>
</div>

{% endblock %}
